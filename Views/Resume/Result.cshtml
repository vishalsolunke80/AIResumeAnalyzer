@model AIResumeAnalyzer.Models.Resume
@{
    ViewData["Title"] = "Analysis Result";
    var scoreClass = Model.Score >= 70 ? "high" : (Model.Score >= 40 ? "medium" : "low");
}

<div class="row justify-content-center mt-4">
    <div class="col-lg-10">
        <!-- Score Card -->
        <div class="glass-card animate-in" style="opacity: 1;">
            <div class="card-header-gradient" style="background: @(Model.Score >= 70 ? "linear-gradient(135deg, #11998e 0%, #38ef7d 100%)" : (Model.Score >= 40 ? "linear-gradient(135deg, #f7971e 0%, #ffd200 100%)" : "linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%)"));">
                <h2>üìä Analysis Complete</h2>
            </div>
            
            <div class="row align-items-center">
                <div class="col-md-4">
                    <div class="score-container">
                        <div class="score-circle" style="--score: @Model.Score;">
                            <span class="score-value @scoreClass" data-score="@Model.Score">@Model.Score%</span>
                        </div>
                        <div class="score-label">Match Score</div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="result-section">
                        <h5>üìÑ Resume</h5>
                        <p style="color: var(--text-primary); font-size: 1.1rem; margin: 0;">@Model.FileName</p>
                        <small style="color: var(--text-muted);">Analyzed on @Model.CreatedAt.ToString("MMM dd, yyyy 'at' h:mm tt")</small>
                    </div>
                    
                    <div class="mt-3">
                        @if (Model.Score >= 70)
                        {
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: var(--accent-green);">
                                <span style="font-size: 1.5rem;">üéâ</span>
                                <span style="font-weight: 600;">Excellent match! Your resume aligns well with this job.</span>
                            </div>
                        }
                        else if (Model.Score >= 40)
                        {
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: #ffd200;">
                                <span style="font-size: 1.5rem;">üí°</span>
                                <span style="font-weight: 600;">Good potential! Some improvements could boost your chances.</span>
                            </div>
                        }
                        else
                        {
                            <div style="display: flex; align-items: center; gap: 0.5rem; color: #ff6b6b;">
                                <span style="font-size: 1.5rem;">‚ö†Ô∏è</span>
                                <span style="font-weight: 600;">Low match. Review the suggestions below to improve.</span>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Feedback -->
        <div class="glass-card mt-4 animate-in delay-1" style="opacity: 1;">
            <h4 style="color: var(--accent-purple); margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                ü§ñ AI Analysis & Recommendations
            </h4>
            <div class="result-section">
                <div class="result-content">@Model.AIResult</div>
            </div>
        </div>
        
        <!-- Actions -->
        <div class="d-flex justify-content-between mt-4 flex-wrap gap-3">
            <a asp-action="Upload" class="btn-secondary-custom" style="text-decoration: none;">
                ‚Üê Analyze Another Resume
            </a>
            <button onclick="window.print();" class="btn-secondary-custom">
                üñ®Ô∏è Print Results
            </button>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Ensure score animation runs
        document.addEventListener('DOMContentLoaded', function() {
            initScoreAnimation();
        });
    </script>
}
